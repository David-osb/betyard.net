<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Box Score API Test</title>
</head>
<body>
    <h1>NFL Box Score API Test</h1>
    <div id="test-results"></div>
    
    <script src="assets/js/nfl-schedule-api.js"></script>
    <script>
        async function testBoxScoreAPI() {
            const resultsDiv = document.getElementById('test-results');
            
            try {
                console.log('üß™ Testing Box Score API integration...');
                
                // Initialize the API
                const scheduleAPI = new NFLScheduleAPI();
                await scheduleAPI.init();
                
                // Get current games first
                const currentGames = await scheduleAPI.fetchCurrentAndUpcomingGames();
                console.log('Current games:', currentGames);
                
                if (currentGames && currentGames.body && currentGames.body.length > 0) {
                    const firstGame = currentGames.body[0];
                    const gameId = firstGame.gameID;
                    
                    resultsDiv.innerHTML += `<h3>Testing with Game ID: ${gameId}</h3>`;
                    resultsDiv.innerHTML += `<p>Game: ${firstGame.away} @ ${firstGame.home}</p>`;
                    
                    // Test box score API call
                    console.log(`üîÑ Fetching box score for game ${gameId}...`);
                    const boxScore = await scheduleAPI.fetchBoxScore(gameId);
                    
                    console.log('Box score result:', boxScore);
                    
                    if (boxScore && boxScore.body) {
                        resultsDiv.innerHTML += `<h4>‚úÖ Box Score API Success!</h4>`;
                        resultsDiv.innerHTML += `<p>Away Score: ${boxScore.body.awayPts || 'N/A'}</p>`;
                        resultsDiv.innerHTML += `<p>Home Score: ${boxScore.body.homePts || 'N/A'}</p>`;
                        resultsDiv.innerHTML += `<p>Quarter: ${boxScore.body.quarter || 'N/A'}</p>`;
                        resultsDiv.innerHTML += `<p>Status: ${boxScore.body.gameStatus || 'N/A'}</p>`;
                    } else {
                        resultsDiv.innerHTML += `<h4>‚ùå Box Score API returned no data</h4>`;
                        resultsDiv.innerHTML += `<p>Response: ${JSON.stringify(boxScore)}</p>`;
                    }
                } else {
                    resultsDiv.innerHTML += `<h4>‚ùå No current games available for testing</h4>`;
                }
                
            } catch (error) {
                console.error('‚ùå Test failed:', error);
                resultsDiv.innerHTML += `<h4>‚ùå Test Error</h4>`;
                resultsDiv.innerHTML += `<p>Error: ${error.message}</p>`;
            }
        }
        
        // Run test when page loads
        window.addEventListener('load', testBoxScoreAPI);
    </script>
</body>
</html>